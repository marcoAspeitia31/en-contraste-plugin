(()=>{"use strict";var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,n=JSON.parse('{"apiVersion":2,"name":"en-contraste-plugin/news","title":"Posts recientes","category":"widgets","icon":"admin-post","description":"Lista los últimos posts del sitio web","keywords":["posts","entradas","noticias","en contraste"],"version":"1.0.0","textdomain":"en-contraste-plugin","attributes":{"title":{"type":"string"},"content":{"type":"string"},"per_page":{"type":"integer"},"align":{"type":"string","default":"wide"}},"supports":{"align":["wide"]},"editorScript":"file:./build/index.js"}'),a=window.React,l=window.wp.apiFetch;var r=e.n(l);const s=window.wp.element,c=window.wp.blockEditor,i=window.wp.components;(0,t.registerBlockType)(n,{edit:e=>{const{attributes:{title:t,content:n,per_page:l},setAttributes:o}=e,m=(0,c.useBlockProps)(),[d,p]=(0,s.useState)([]);return(0,s.useEffect)((()=>{(async()=>{void 0===l&&o({per_page:3});const e=`wp/v2/posts?per_page=${l}`,t=await r()({path:e});p(t)})()}),[l]),(0,a.createElement)(a.Fragment,null,(0,a.createElement)(c.InspectorControls,null,(0,a.createElement)(i.Panel,{header:"Últimos posts"},(0,a.createElement)(i.PanelBody,{title:"Cantidad de Posts a mostrar",icon:"welcome-widgets-menus",initialOpen:!0},(0,a.createElement)(i.PanelRow,null,(0,a.createElement)(i.RangeControl,{label:"Número de posts",value:l,onChange:e=>{o({per_page:e})},min:1,max:10,help:"Elige la cantidad de posts a mostrar"}))))),d.length>0&&(0,a.createElement)("div",{...m},(0,a.createElement)("section",{class:"article-area"},(0,a.createElement)("div",{class:"container"},(0,a.createElement)("div",{class:"row justify-content-center"},(0,a.createElement)("div",{class:"col-lg-6 col-md-9"},(0,a.createElement)("div",{class:"section-title text-center"},(0,a.createElement)(c.RichText,{tagName:"h2",className:"title",value:t,onChange:e=>{o({title:e})},placeholder:"Agrega un título"}),(0,a.createElement)(c.RichText,{tagName:"p",value:n,onChange:e=>{o({content:e})},placeholder:"Agrega un descripción"})))),(0,a.createElement)("div",{class:"row justify-content-center"},d.map((e=>{const t=moment(e.date),n=t.format("MMM"),l=t.format("D"),r=t.format("YYYY");let s=(new DOMParser).parseFromString(e.excerpt.rendered,"text/html").documentElement.textContent;return s.length>100&&(s=`${s.substring(0,100)}...`),(0,a.createElement)("div",{class:"col-lg-4 col-md-6 col-sm-9",key:e.id},(0,a.createElement)("div",{class:"article-item mt-30"},(0,a.createElement)("div",{class:"article-top text-center"},(0,a.createElement)("a",{href:e.link},(0,a.createElement)("h4",null,e.title.rendered))),(0,a.createElement)("div",{class:"article-thumb"},(0,a.createElement)("a",{href:e.link},(0,a.createElement)("img",{src:e.featured_image_src,alt:""})),(0,a.createElement)("div",{class:"date"},(0,a.createElement)("span",{class:"title"},l),(0,a.createElement)("span",null,n),(0,a.createElement)("span",null,r))),(0,a.createElement)("div",{class:"article-content pl-25 pr-25 pt-25"},(0,a.createElement)("p",null,s),(0,a.createElement)("a",{href:e.link},"Leer más"))))})))))))},save:()=>null})})();